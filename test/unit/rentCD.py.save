import datetime
from datetime import timedelta 

class RentCD(object):

    def __init__ (self):
        self.customer_list = {'001' : 'Air', '002' : 'Net'}
        self.cd_list = {'1' : 'Twila Paris Hits', '2' : 'Fantasia 1999', '3' : 'Pride and Prejudice'}
        self.cd_rented = {}

    def add_customer(self, customer):
        self.customer_list[customer.id] = customer.name 

    def get_customer_name(self, customer_id):
        if self.customer_list.has_key(customer_id):
            return self.customer_list[customer_id]
        else:
            return 'Customer not found'
             
    def checkout(self, customer_id, cd_id):
        if self.get_customer_name(customer_id) != 'Customer not found':
            if self.cd_list.has_key(cd_id) :
                self.cd_rented[cd_id] = customer_id
                d1 = datetime.datetime.now() + timedelta(days=2)
                return self.customer_list[customer_id] + \
                " (" + customer_id  + ") rented " + \
                self.cd_list[cd_id]  + " (" + cd_id + ") "\
                "Rental Due: " + d1.strftime("%m/%d/%Y")
            else:
                if self.cd_rented.has_key(cd_id):
                    return 'CD already rented'
                
                    self.cd_rented[cd_id] = customer_id
                    d1 = datetime.datetime.now() + timedelta(days=2)
                    return self.customer_list[customer_id] + \
                    " (" + customer_id  + ") rented " + \
                    self.cd_list[cd_id]  + " (" + cd_id + ") "\
                    "Rental Due: " + d1.strftime("%m/%d/%Y")
                else:
                    return 'CD id is invalid/CD not found' 
        else:
            return 'Customer id is invalid'
